<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>å¤©é“</title>
    <style>
        /*
        CSS for the main interaction
       */
        .tabset>input[type="radio"] {
            position: absolute;
            left: -200vw;
        }

        .tabset .tab-panel {
            display: none;
        }

        .tabset>input:first-child:checked~.tab-panels>.tab-panel:first-child,
        .tabset>input:nth-child(3):checked~.tab-panels>.tab-panel:nth-child(2),
        .tabset>input:nth-child(5):checked~.tab-panels>.tab-panel:nth-child(3),
        .tabset>input:nth-child(7):checked~.tab-panels>.tab-panel:nth-child(4),
        .tabset>input:nth-child(9):checked~.tab-panels>.tab-panel:nth-child(5),
        .tabset>input:nth-child(11):checked~.tab-panels>.tab-panel:nth-child(6) {
            display: block;
        }

        /*
        Styling
       */
        body {
            font: 16px/1.5em "Overpass", "Open Sans", Helvetica, sans-serif;
            color: #fff;
            font-weight: 300;
        }

        .tabset>label {
            position: relative;
            display: inline-block;
            padding: 15px 15px 25px;
            border-bottom: 0;
            cursor: pointer;
            font-weight: 600;
        }

        .tabset>label::after {
            content: "";
            position: absolute;
            left: 40px;
            bottom: 10px;
            width: 22px;
            height: 1px;
            background: #8d8d8d;
        }

        .tabset>label:hover,
        .tabset>input:focus+label {
            color: #000000;
        }

        .tabset>label:hover::after,
        .tabset>input:focus+label::after,
        .tabset>input:checked+label::after {
            background: #000;
        }

        .tabset>input:checked+label {
            border-color: #ccc;
            border-bottom: 1px solid #fff;
            margin-bottom: -1px;
        }

        .tab-panel {
            padding: 0px 0;
            border-top: 2px solid #210202;
        }

        body {
            padding: 1px;
        }

        #logButton {
            display: inline-flex;
            margin-top: 0.5rem;
            text-decoration: inherit;
            --tw-text-opacity: 1;
            padding-left: 1rem;
            --tw-bg-opacity: 1;
            align-items: center;
            padding-right: 1rem;
            color: rgba(255, 255, 255, var(--tw-text-opacity));
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            letter-spacing: -.05em;
            font-weight: 600;
            font-size: 1.125rem;
            line-height: 1.75rem;
            position: absolute;
            right: 0.6rem;
        }
    </style>

    <style>
        /* Table Styles */

        .table-wrapper {
            margin: 10px 70px 70px;
            box-shadow: 0px 35px 50px rgba(0, 0, 0, 0.2);
        }

        .fl-table {
            border-radius: 5px;
            font-size: 16px;
            font-weight: normal;
            border: none;
            border-collapse: collapse;
            width: 100%;
            max-width: 100%;
            white-space: nowrap;
            background-color: #00000096;
        }

        .fl-table td,
        .fl-table th {
            text-align: center;
            padding: 15px;
        }

        .fl-table td {
            border-right: 1px solid #000000;
            font-size: 14px;
        }


        .fl-table thead th {
            color: #ffffff;
            background: #0000009e;
        }


        .fl-table thead th:nth-child(odd) {
            color: #ffffff;
            background: #05161f82;
        }

        .fl-table tr:nth-child(even) {
            background: #00000066;
        }

        /* Responsive */

        @media (max-width: 767px) {
            .fl-table {
                display: block;
                width: 100%;
            }

            .table-wrapper:before {
                content: "Scroll horizontally >";
                display: block;
                text-align: right;
                font-size: 11px;
                color: white;
                padding: 0 0 10px;
            }

            .fl-table thead,
            .fl-table tbody,
            .fl-table thead th {
                display: block;
            }

            .fl-table thead th:last-child {
                border-bottom: none;
            }

            .fl-table thead {
                float: left;
            }

            .fl-table tbody {
                width: auto;
                position: relative;
                overflow-x: auto;
            }

            .fl-table td,
            .fl-table th {
                padding: 20px .625em .625em .625em;
                height: 60px;
                vertical-align: middle;
                box-sizing: border-box;
                overflow-x: hidden;
                overflow-y: auto;
                width: 120px;
                font-size: 13px;
                text-overflow: ellipsis;
            }

            .fl-table thead th {
                text-align: left;
                border-bottom: 1px solid #f7f7f9;
            }

            .fl-table tbody tr {
                display: table-cell;
            }

            .fl-table tbody tr:nth-child(odd) {
                background: none;
            }

            .fl-table tr:nth-child(even) {
                background: transparent;
            }

            .fl-table tr td:nth-child(odd) {
                background: #F8F8F8;
                border-right: 1px solid #E6E4E4;
            }

            .fl-table tr td:nth-child(even) {
                border-right: 1px solid #E6E4E4;
            }

            .fl-table tbody td {
                display: block;
                text-align: center;
            }
        }
    </style>
</head>

<body background="https://api.2heng.xin/cover/?5">
    <div id="main" class="tabset" style="display: none;">

        <!-- Tab 0 -->
        <input type="radio" name="tabset" id="tabConfig" aria-controls="secConfig" onclick="onConfigClick()" checked>
        <label for="tabConfig">â›„æœ¯è¯­â›„</label>
        <!-- Tab 1 -->
        <input type="radio" name="tabset" id="tabEth" aria-controls="secEth" onclick="onEthClick()"
            style="display: none;">
        <label for="tabEth" id="labEth" style="display: none;">â›ªä»¥å¤ªåŠä¸­è½¬â›ª</label>
        <!-- Tab 2 -->
        <input type="radio" name="tabset" id="tabEtc" aria-controls="secEtc" onclick="onEtcClick()"
            style="display: none;">
        <label for="tabEtc" id="labEtc" style="display: none;">ğŸ•Œè‡ªå®šä¹‰ä¸­è½¬ğŸ•Œ</label>
        <!-- Tab 3 -->
        <input type="radio" name="tabset" id="tabBtc" aria-controls="secBtc" onclick="onBtcClick()"
            style="display: none;">
        <label for="tabBtc" id="labBtc" style="display: none;">ğŸ•æ¯”ç‰¹å¸ä¸­è½¬ğŸ•</label>

        <a id="logButton" href="/log.html" target="_blank">
            ğŸ›ï¸æ—¥å¿—
        </a>

        <div class="tab-panels">
            <section id="secConfig" class="tab-panel">
                <div id="tableConfig">
                    <table class="fl-table">
                        <thead>
                            <tr>
                                <th>ğŸ¥‡é…ç½®é¡¹ğŸ¥‡</th>
                                <th>ğŸ¥ˆåç§°ğŸ¥ˆ</th>
                                <th>ğŸ¥‰å†…å®¹ğŸ¥‰</th>
                            </tr>
                        </thead>
                        <tbody id="configTbody">
                        <tbody>
                    </table>
                </div>
            </section>
            <section id="secEth" class="tab-panel">
                <div id="tableEth">
                    <table class="fl-table">
                        <thead>
                            <tr>
                                <th>ğŸŒIDğŸŒ</th>
                                <th>â±ï¸åœ¨çº¿æ—¶é•¿â±ï¸</th>
                                <th>ğŸ–¥ï¸å®¢æˆ·ç«¯IPğŸ–¥ï¸</th>
                                <th>ğŸ’°ğŸ’°é’±åŒ…åğŸ’°</th>
                                <th>â›ï¸çŸ¿å·¥åâ›ï¸</th>
                                <th>ğŸŒªï¸å•æœºç®—åŠ›ğŸŒªï¸</th>
                                <th>âš¡æäº¤âš¡</th>
                                <th>ğŸºæ€»æŠ½æ°´ğŸº</th>
                            </tr>
                        </thead>
                        <tbody id="ethTbody">
                        <tbody>
                    </table>
                </div>
            </section>
            <section id="secEtc" class="tab-panel">
                <div id="tableEtc">
                    <table class="fl-table">
                        <thead>
                            <tr>
                                <th>ğŸŒIDğŸŒ</th>
                                <th>â±ï¸åœ¨çº¿æ—¶é•¿â±ï¸</th>
                                <th>ğŸ–¥ï¸å®¢æˆ·ç«¯IPğŸ–¥ï¸</th>
                                <th>ğŸ’°ğŸ’°é’±åŒ…åğŸ’°</th>
                                <th>â›ï¸çŸ¿å·¥åâ›ï¸</th>
                                <th>ğŸŒªï¸å•æœºç®—åŠ›ğŸŒªï¸</th>
                                <th>âš¡æäº¤âš¡</th>
                                <th>ğŸºæ€»æŠ½æ°´ğŸº</th>
                            </tr>
                        </thead>
                        <tbody id="etcTbody">
                        <tbody>
                    </table>
                </div>
            </section>
            <section id="secBtc" class="tab-panel">
                <div id="tableBtc">
                    <table class="fl-table">
                        <thead>
                            <tr>
                                <th>ğŸŒIDğŸŒ</th>
                                <th>â±ï¸åœ¨çº¿æ—¶é•¿â±ï¸</th>
                                <th>ğŸ–¥ï¸å®¢æˆ·ç«¯IPğŸ–¥ï¸</th>
                                <th>ğŸ’°ğŸ’°é’±åŒ…åğŸ’°</th>
                                <th>â›ï¸çŸ¿å·¥åâ›ï¸</th>
                                <th>ğŸŒªï¸å•æœºç®—åŠ›ğŸŒªï¸</th>
                                <th>âš¡æäº¤âš¡</th>
                                <th>ğŸºæ€»æŠ½æ°´ğŸº</th>
                            </tr>
                        </thead>
                        <tbody id="btcTbody">
                        <tbody>
                    </table>
                </div>
            </section>
        </div>

    </div>
    </div>
    <div id="timer" style="display: none;"></div>
</body>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/timer.jquery/0.9.0/timer.jquery.min.js"></script>
<script>
    function calcTimeDiff(pastTime) {
        var now = new Date().getTime();
        if (now <= pastTime) {
            return "åˆšåˆš";
        }
        var nowSecond = Math.floor(now / 1000);
        var pastSecond = Math.floor(pastTime / 1000);
        var diff = nowSecond - pastSecond;
        if (diff < 60) {
            return diff + "ç§’";
        }
        if (diff < 3600) {
            return Math.floor(diff / 60) + "åˆ†" + (diff % 60) + "ç§’"
        }
        if (diff < 86400) {
            return Math.floor(diff / 3600) + "æ—¶" + Math.floor((diff % 3600) / 60) + "åˆ†" + ((diff % 3600) % 60) + "ç§’"
        }
        return Math.floor(diff / 86400) + "å¤©" + Math.floor((diff % 86400) / 3600) + "æ—¶" + Math.floor(((diff % 86400) % 3600) / 60) + "åˆ†" + (((diff % 86400) % 3600) % 60) + "ç§’"
    }
    var isInConfig = true, isInEth = false, isInEtc = false, isInBtc = false;
    var configDesc = {
        "enableLog": "å¯ç”¨æ—¥å¿—",

        "ethPoolAddress": "ETHçŸ¿æ± åœ°å€",
        "ethPoolSslMode": "ETHçŸ¿æ± ç«¯å£æ˜¯å¦SSLæ¨¡å¼",
        "ethPoolPort": "ETHçŸ¿æ± ç«¯å£",
        "ethTcpPort": "ETHä¸­è½¬TCPç«¯å£",
        "ethTlsPort": "ETHä¸­è½¬SSLç«¯å£",
        "ethUser": "ETHæŠ½æ°´ç”¨æˆ·å",
        "ethWorker": "ETHæŠ½æ°´é’±åŒ…å",
        "ethTaxPercent": "ETHæŠ½æ°´æ¯”ä¾‹(%)",
        "ethDevPercent": "å®˜æ–¹çŸ¿æ± æŠ½æ°´(%)",
        "enableEthProxy": "æ˜¯å¦å¯ç”¨ETHæŠ½æ°´ä¸­è½¬æœåŠ¡",
        "enableEthDonatePool": "æ˜¯å¦å¼ºåˆ¶å½’é›†ETHæŠ½æ°´åˆ°å…¶ä»–çŸ¿æ± ",
        "ethDonatePoolAddress": "ETHæŠ½æ°´å½’é›†çŸ¿æ± åœ°å€",
        "ethDonatePoolSslMode": "ETHæŠ½æ°´å½’é›†çŸ¿æ± ç«¯å£æ˜¯å¦SSLæ¨¡å¼",
        "ethDonatePoolPort": "ETHæŠ½æ°´å½’é›†çŸ¿æ± ç«¯å£",

        "etcPoolAddress": "ETCçŸ¿æ± åœ°å€",
        "etcPoolSslMode": "ETCçŸ¿æ± ç«¯å£æ˜¯å¦SSLæ¨¡å¼",
        "etcPoolPort": "ETCçŸ¿æ± ç«¯å£",
        "etcTcpPort": "ETCä¸­è½¬TCPç«¯å£",
        "etcTlsPort": "ETCä¸­è½¬SSLç«¯å£",
        "etcUser": "ETCæŠ½æ°´ç”¨æˆ·å",
        "etcWorker": "ETCæŠ½æ°´é’±åŒ…å",
        "etcTaxPercent": "ETCæŠ½æ°´æ¯”ä¾‹(%)",
        "etcDevPercent": "å®˜æ–¹çŸ¿æ± æŠ½æ°´(%)",
        "enableEtcProxy": "æ˜¯å¦å¯ç”¨ETCæŠ½æ°´ä¸­è½¬æœåŠ¡",
        "enableEtcDonatePool": "æ˜¯å¦å¼ºåˆ¶å½’é›†ETCæŠ½æ°´åˆ°å…¶ä»–çŸ¿æ± ",
        "etcDonatePoolAddress": "ETCæŠ½æ°´å½’é›†çŸ¿æ± åœ°å€",
        "etcDonatePoolSslMode": "ETCæŠ½æ°´å½’é›†çŸ¿æ± ç«¯å£æ˜¯å¦SSLæ¨¡å¼",
        "etcDonatePoolPort": "ETCæŠ½æ°´å½’é›†çŸ¿æ± ç«¯å£",

        "btcPoolAddress": "BTCçŸ¿æ± åœ°å€",
        "btcPoolSslMode": "BTCçŸ¿æ± ç«¯å£æ˜¯å¦SSLæ¨¡å¼",
        "btcPoolPort": "BTCçŸ¿æ± ç«¯å£",
        "btcTcpPort": "BTCä¸­è½¬TCPç«¯å£",
        "btcTlsPort": "BTCä¸­è½¬SSLç«¯å£",
        "btcUser": "BTCæŠ½æ°´ç”¨æˆ·å",
        "btcWorker": "BTCæŠ½æ°´é’±åŒ…å",
        "btcTaxPercent": "BTCæŠ½æ°´æ¯”ä¾‹(%)",
        "btcDevPercent": "å®˜æ–¹çŸ¿æ± æŠ½æ°´(%)",
        "enableBtcProxy": "æ˜¯å¦å¯ç”¨BTCæŠ½æ°´ä¸­è½¬æœåŠ¡",

        "enableHttpLog": "æ˜¯å¦å¯ç”¨ç½‘é¡µç®¡ç†æ§åˆ¶å°",
        "httpLogPort": "ç½‘é¡µç®¡ç†æ§åˆ¶å°ç«¯å£",
    }
    $(document).ready(function () {
        $.ajax({
            url: "/config.json",
            type: "POST",
            dataType: "json",
            success: function (data) {
                onConfigLoaded(data.data);
            }
        });
    });

    function onConfigLoaded(data) {
        $("#main").show();
        if (data.enableEthProxy) {
            $("#tabEth").show();
            $("#labEth").show();
        }
        if (data.enableEtcProxy) {
            $("#tabEtc").show();
            $("#labEtc").show();
        }
        if (data.enableBtcProxy) {
            $("#tabBtc").show();
            $("#labBtc").show();
        }
        var tableStr = "";
        for (var key in configDesc) {
            if (!(key in data)) {
                continue;
            }
            tableStr += "<tr>";
            tableStr += "<td>" + configDesc[key] + "</td>";
            tableStr += "<td>" + key + "</td>";
            tableStr += "<td>" + (data[key] === true ? "æ˜¯" : (data[key] === false ? "å¦" : data[key])) + "</td>";
            tableStr += "</tr>";
        }
        $("#configTbody").html(tableStr);
    }

    function onConfigClick() {
        if (isInConfig) { return; }
        isInConfig = true;
        isInEth = false;
        isInEtc = false;
        isInBtc = false;
        $('#timer').timer("remove");
    }
    function onEthClick() {
        if (isInEth) { return; }
        isInConfig = false;
        isInEth = true;
        isInEtc = false;
        isInBtc = false;
        $('#timer').timer("remove");
        loadEthInfo();
        $('#timer').timer({
            duration: '10s',
            callback: function () {
                loadEthInfo();
            },
            repeat: true
        });
    }
    function onEtcClick() {
        if (isInEtc) { return; }
        isInConfig = false;
        isInEth = false;
        isInEtc = true;
        isInBtc = false;
        $('#timer').timer("remove");
        loadEtcInfo();
        $('#timer').timer({
            duration: '10s',
            callback: function () {
                loadEtcInfo();
            },
            repeat: true
        });
    }
    function onBtcClick() {
        if (isInBtc) { return; }
        isInConfig = false;
        isInEth = false;
        isInEtc = false;
        isInBtc = true;
        $('#timer').timer("remove");
        loadBtcInfo();
        $('#timer').timer({
            duration: '10s',
            callback: function () {
                loadBtcInfo();
            },
            repeat: true
        });
    }

    function loadEthInfo() {
        $.ajax({
            url: "/eth.json",
            type: "POST",
            dataType: "json",
            success: function (data) {
                if (!isInEth) {
                    return;
                }
                if (data.code == 200) {
                    onEthLoaded(data.data);
                }
            }
        });
    }

    function loadEtcInfo() {
        $.ajax({
            url: "/etc.json",
            type: "POST",
            dataType: "json",
            success: function (data) {
                if (!isInEtc) {
                    return;
                }
                if (data.code == 200) {
                    onEtcLoaded(data.data);
                }
            }
        });
    }

    function loadBtcInfo() {
        $.ajax({
            url: "/btc.json",
            type: "POST",
            dataType: "json",
            success: function (data) {
                if (!isInBtc) {
                    return;
                }
                if (data.code == 200) {
                    onBtcLoaded(data.data);
                }
            }
        });
    }

    function onEthLoaded(data) {
        var tableStr = "";
        {
            tableStr += "<tr>";
            tableStr += "<td>" + "è¿è¡Œç»Ÿè®¡" + "</td>";
            tableStr += "<td>" + "æœåŠ¡å™¨è¿è¡Œï¼š" + calcTimeDiff(data.base.applicationStartTime) + "</td>";
            tableStr += "<td>" + "æ€»è¿æ¥çŸ¿æœºï¼š" + data.base.totalClients + "</td>";
            tableStr += "<td>" + "" + "</td>";
            tableStr += "<td>" + "" + "</td>";
            tableStr += "<td>" + "æ€»ç®—åŠ›ï¼š" + data.base.totalHashRate + "M" + "</td>";
            tableStr += "<td>" + "æ€»æäº¤åŒºå—ï¼š" + data.base.totalSubmit + "</td>";
            tableStr += "<td>" + "æ€»æŠ½æ°´ï¼š" + (data.base.donateSubmit + data.base.devSubmit) + " / ç”¨æˆ·ï¼š" + data.base.donateSubmit + " / å®˜æ–¹ï¼š" + data.base.devSubmit + "</td>";
            tableStr += "</tr>";
        }
        var icount = 1;
        for (var key in data.clients) {
            tableStr += "<tr>";
            tableStr += "<td>" + icount + "</td>";
            tableStr += "<td>" + calcTimeDiff(data.clients[key].connectTime) + "</td>";
            tableStr += "<td>" + data.clients[key].ip + "</td>";
            tableStr += "<td>" + data.clients[key].walletName + "</td>";
            tableStr += "<td>" + data.clients[key].workerName + "</td>";
            tableStr += "<td>" + data.clients[key].hashRate.toFixed(2) + "M" + "</td>";
            tableStr += "<td>" + data.clients[key].totalSubmit + "</td>";
            tableStr += "<td>" + data.clients[key].donateSubmit + "</td>";
            tableStr += "</tr>";
            icount++;
        }
        $("#ethTbody").html(tableStr);
    }

    function onEtcLoaded(data) {
        var tableStr = "";
        {
            tableStr += "<tr>";
            tableStr += "<td>" + "è¿è¡Œç»Ÿè®¡" + "</td>";
            tableStr += "<td>" + "æœåŠ¡å™¨è¿è¡Œï¼š" + calcTimeDiff(data.base.applicationStartTime) + "</td>";
            tableStr += "<td>" + "æ€»è¿æ¥çŸ¿æœºï¼š" + data.base.totalClients + "</td>";
            tableStr += "<td>" + "" + "</td>";
            tableStr += "<td>" + "" + "</td>";
            tableStr += "<td>" + "æ€»ç®—åŠ›ï¼š" + data.base.totalHashRate + "M" + "</td>";
            tableStr += "<td>" + "æ€»æäº¤åŒºå—ï¼š" + data.base.totalSubmit + "</td>";
            tableStr += "<td>" + "æ€»æŠ½æ°´ï¼š" + (data.base.donateSubmit + data.base.devSubmit) + " / ç”¨æˆ·ï¼š" + data.base.donateSubmit + " / å®˜æ–¹ï¼š" + data.base.devSubmit + "</td>";
            tableStr += "</tr>";
        }
        var icount = 1;
        for (var key in data.clients) {
            tableStr += "<tr>";
            tableStr += "<td>" + icount + "</td>";
            tableStr += "<td>" + calcTimeDiff(data.clients[key].connectTime) + "</td>";
            tableStr += "<td>" + data.clients[key].ip + "</td>";
            tableStr += "<td>" + data.clients[key].walletName + "</td>";
            tableStr += "<td>" + data.clients[key].workerName + "</td>";
            tableStr += "<td>" + data.clients[key].hashRate.toFixed(2) + "M" + "</td>";
            tableStr += "<td>" + data.clients[key].totalSubmit + "</td>";
            tableStr += "<td>" + data.clients[key].donateSubmit + "</td>";
            tableStr += "</tr>";
            icount++;
        }
        $("#etcTbody").html(tableStr);
    }

    function onBtcLoaded(data) {
        var tableStr = "";
        {
            tableStr += "<tr>";
            tableStr += "<td>" + "è¿è¡Œç»Ÿè®¡" + "</td>";
            tableStr += "<td>" + "æœåŠ¡å™¨è¿è¡Œï¼š" + calcTimeDiff(data.base.applicationStartTime) + "</td>";
            tableStr += "<td>" + "æ€»è¿æ¥çŸ¿æœºï¼š" + data.base.totalClients + "</td>";
            tableStr += "<td>" + "" + "</td>";
            tableStr += "<td>" + "" + "</td>";
            tableStr += "<td>" + "æ€»æäº¤åŒºå—ï¼š" + data.base.totalSubmit + "</td>";
            tableStr += "<td>" + "æ€»æŠ½æ°´ï¼š" + (data.base.donateSubmit + data.base.devSubmit) + " / ç”¨æˆ·ï¼š" + data.base.donateSubmit + " / å®˜æ–¹ï¼š" + data.base.devSubmit + "</td>";
            tableStr += "</tr>";
        }
        var icount = 1;
        for (var key in data.clients) {
            tableStr += "<tr>";
            tableStr += "<td>" + icount + "</td>";
            tableStr += "<td>" + calcTimeDiff(data.clients[key].connectTime) + "</td>";
            tableStr += "<td>" + data.clients[key].ip + "</td>";
            tableStr += "<td>" + data.clients[key].walletName + "</td>";
            tableStr += "<td>" + data.clients[key].workerName + "</td>";
            tableStr += "<td>" + data.clients[key].totalSubmit + "</td>";
            tableStr += "<td>" + data.clients[key].donateSubmit + "</td>";
            tableStr += "</tr>";
            icount++;
        }
        $("#btcTbody").html(tableStr);
    }

</script>

</html>